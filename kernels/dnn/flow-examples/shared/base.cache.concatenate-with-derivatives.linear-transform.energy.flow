<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
     shared/base.cache.concatenate-with-derivatives.linear-transform.energy.flow $Rev: 330 $

     (c) 2008 by RWTH Aachen University
     rwthasr@i6.informatik.rwth-aachen.de
     You can redistribute this file and/or modify it under the terms of the
     RWTH ASR License
     <http://www-i6.informatik.rwth-aachen.de/rwth-asr/rwth-asr-license.html>
-->
<network>
  <out name="features"/>
  <out name="energies"/>

  <param name="id"/>

  <param name="input-file"/>
  <param name="start-time"/>
  <param name="end-time"/>
  <param name="track"/>

  <param name="speaker"/>

  <node name="samples" filter="samples.flow"
	input-file="$(input-file)" start-time="$(start-time)" end-time="$(end-time)" track="$(track)"/>

  <node name="base-feature-extraction" filter="$(file)"
	ignore-unknown-parameters="true"
	start-time="$(start-time)" end-time="$(end-time)" speaker="$(speaker)"/>
  <link from="samples:out" to="base-feature-extraction:samples"/>

  <node name="base-feature-extraction-cache" filter="generic-cache" 
	id="$(id)"/>
  <link from="base-feature-extraction:out" to="base-feature-extraction-cache"/>

  <node name="energy-split" filter="generic-vector-f32-split"/>
  <link from="base-feature-extraction-cache" to="energy-split"/>

  <node name="energy-convert" filter="generic-convert-vector-f32-to-f32"/>
  <link from="energy-split:0" to="energy-convert"/>
  <link from="energy-convert" to="network:energies"/>

  <node name="concatenate-with-derivatives" filter="concatenate-with-derivatives.flow"/>
  <link from="base-feature-extraction-cache" to="concatenate-with-derivatives:in"/>

  <node name="linear-transform" filter="signal-matrix-multiplication-f32"/>
  <link from="concatenate-with-derivatives:out" to="linear-transform"/>
  <link from="linear-transform" to="network:features"/>
</network>
